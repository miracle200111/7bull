# AIè§’è‰²æ‰®æ¼”ç½‘é¡µåº”ç”¨

ä¸€ä¸ªåŸºäºAIçš„è§’è‰²æ‰®æ¼”å¯¹è¯å¹³å°ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿä¸å†å²äººç‰©ã€æ–‡å­¦è§’è‰²å’Œè™šæ‹Ÿäººç‰©è¿›è¡Œæ·±åº¦å¯¹è¯ã€‚

## ğŸŒŸ åŠŸèƒ½ç‰¹è‰²

- **å¤šæ ·åŒ–AIè§’è‰²**: è‹æ ¼æ‹‰åº•ã€å“ˆåˆ©Â·æ³¢ç‰¹ã€èå£«æ¯”äºšç­‰ç»å…¸è§’è‰²
- **æ™ºèƒ½æŠ€èƒ½ç³»ç»Ÿ**: æ¯ä¸ªè§’è‰²å…·å¤‡ç‹¬ç‰¹çš„ä¸“ä¸šæŠ€èƒ½
- **è¯­éŸ³äº¤äº’**: æ”¯æŒè¯­éŸ³è¯†åˆ«å’Œæ–‡æœ¬è½¬è¯­éŸ³
- **ç”¨æˆ·ä¸ªæ€§åŒ–**: ç™»å½•ç³»ç»Ÿå’Œå¯¹è¯å†å²è®°å½•
- **å“åº”å¼è®¾è®¡**: ç°ä»£åŒ–çš„ç”¨æˆ·ç•Œé¢

## ğŸ­ AIè§’è‰²æŠ€èƒ½

### 1. è‹æ ¼æ‹‰åº• ğŸ§™â€â™‚ï¸
- **çŸ¥è¯†é—®ç­”èƒ½åŠ›**: æ·±åšçš„å“²å­¦çŸ¥è¯†ï¼Œå¤šè§’åº¦åˆ†æé—®é¢˜
- **å“²å­¦æ€è¾¨èƒ½åŠ›**: è‹æ ¼æ‹‰åº•å¼é—®ç­”æ³•ï¼Œå¼•å¯¼ç”¨æˆ·æ€è€ƒ

### 2. å“ˆåˆ©Â·æ³¢ç‰¹ âš¡
- **æƒ…æ„Ÿæ”¯æŒèƒ½åŠ›**: ç†è§£æƒ…æ„Ÿå›°æ‰°ï¼Œç»™äºˆæ¸©æš–æ”¯æŒ
- **å†’é™©æ•…äº‹åˆ†äº«**: åˆ†äº«éœæ ¼æ²ƒèŒ¨çš„å†’é™©ç»å†

### 3. å¨å»‰Â·èå£«æ¯”äºš ğŸ­
- **åˆ›æ„å†™ä½œèƒ½åŠ›**: å„ç§æ–‡å­¦å½¢å¼çš„åˆ›ä½œæŒ‡å¯¼
- **æ–‡å­¦åˆ›ä½œæŒ‡å¯¼**: åˆ†æä½œå“ç»“æ„ï¼ŒæŒ‡å¯¼è§’è‰²å¡‘é€ 

## ğŸ›  æŠ€æœ¯æ¶æ„

### å‰ç«¯
- **React 18**: ä¸»æ¡†æ¶
- **Material-UI**: ç°ä»£åŒ–UIç»„ä»¶
- **Web Speech API**: è¯­éŸ³è¯†åˆ«
- **Axios**: HTTPå®¢æˆ·ç«¯

### åç«¯
- **Python 3.9+**: ä¸»è¯­è¨€
- **FastAPI**: é«˜æ€§èƒ½Webæ¡†æ¶
- **OpenAI GPT-4**: å¤§è¯­è¨€æ¨¡å‹
- **JWT**: èº«ä»½è®¤è¯
- **æœ¬åœ°æ–‡ä»¶å­˜å‚¨**: ç”¨æˆ·æ•°æ®å’Œå¯¹è¯å†å²

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.8+ (åœ¨macOSä¸Šé€šå¸¸ä½¿ç”¨ `python3` å‘½ä»¤)
- Node.js 14+
- OpenAI APIå¯†é’¥

### 1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd 7bull
```

### 2. é…ç½®åç«¯
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp backend/env_example.txt backend/.env

# ç¼–è¾‘.envæ–‡ä»¶ï¼Œæ·»åŠ ä½ çš„OpenAI APIå¯†é’¥
# OPENAI_API_KEY=your_openai_api_key_here

# å¯é€‰ï¼šæ‰‹åŠ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ (å¯åŠ¨è„šæœ¬ä¼šè‡ªåŠ¨å¤„ç†)
cd backend
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
cd ..
```

### 3. å¯åŠ¨åç«¯æœåŠ¡
```bash
# æ–¹æ³•1: ä½¿ç”¨è‡ªåŠ¨å¯åŠ¨è„šæœ¬ (æ¨è)
python3 start_backend.py

# æ–¹æ³•2: æ‰‹åŠ¨è®¾ç½®è™šæ‹Ÿç¯å¢ƒ
chmod +x setup_venv.sh
./setup_venv.sh
```

### 4. å¯åŠ¨å‰ç«¯æœåŠ¡
```bash
./start_frontend.sh
```

### 5. è®¿é—®åº”ç”¨
æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:3000

## ğŸ“± ä½¿ç”¨æŒ‡å—

### æ³¨å†Œ/ç™»å½•
1. è®¿é—®åº”ç”¨é¦–é¡µ
2. é€‰æ‹©"æ³¨å†Œ"åˆ›å»ºæ–°è´¦æˆ·æˆ–"ç™»å½•"ç°æœ‰è´¦æˆ·
3. è¾“å…¥ç”¨æˆ·åã€é‚®ç®±å’Œå¯†ç 

### é€‰æ‹©AIè§’è‰²
1. ç™»å½•åè¿›å…¥è§’è‰²é€‰æ‹©é¡µé¢
2. æµè§ˆå¯ç”¨çš„AIè§’è‰²
3. ä½¿ç”¨æœç´¢åŠŸèƒ½æŸ¥æ‰¾ç‰¹å®šè§’è‰²
4. ç‚¹å‡»"å¼€å§‹å¯¹è¯"ä¸è§’è‰²äº’åŠ¨

### è¿›è¡Œå¯¹è¯
1. åœ¨èŠå¤©ç•Œé¢è¾“å…¥æ¶ˆæ¯
2. ä½¿ç”¨éº¦å…‹é£æŒ‰é’®è¿›è¡Œè¯­éŸ³è¾“å…¥
3. ç‚¹å‡»éŸ³é‡æŒ‰é’®å¬å–AIå›å¤
4. æŸ¥çœ‹è§’è‰²çš„ä¸“ä¸šæŠ€èƒ½æ ‡ç­¾

### æŠ€èƒ½è§¦å‘ç¤ºä¾‹
- **çŸ¥è¯†é—®ç­”**: "ä»€ä¹ˆæ˜¯çœŸç†ï¼Ÿ"ã€"å¦‚ä½•ç†è§£æ­£ä¹‰ï¼Ÿ"
- **æƒ…æ„Ÿæ”¯æŒ**: "æˆ‘æ„Ÿåˆ°å¾ˆå›°æƒ‘"ã€"éœ€è¦ä¸€äº›é¼“åŠ±"
- **åˆ›æ„å†™ä½œ**: "å¸®æˆ‘å†™ä¸€é¦–è¯—"ã€"å¦‚ä½•åˆ›ä½œæ•…äº‹ï¼Ÿ"

## ğŸ— é¡¹ç›®ç»“æ„

```
7bull/
â”œâ”€â”€ backend/                 # Pythonåç«¯
â”‚   â”œâ”€â”€ main.py             # FastAPIåº”ç”¨ä¸»æ–‡ä»¶
â”‚   â”œâ”€â”€ requirements.txt    # Pythonä¾èµ–
â”‚   â””â”€â”€ env_example.txt     # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ frontend/               # Reactå‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/     # Reactç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.js    # ç™»å½•ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.js# è§’è‰²é€‰æ‹©é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ Chat.js     # èŠå¤©ç•Œé¢
â”‚   â”‚   â””â”€â”€ App.js          # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â””â”€â”€ package.json        # å‰ç«¯ä¾èµ–
â”œâ”€â”€ data/                   # æ•°æ®å­˜å‚¨
â”‚   â”œâ”€â”€ users.json          # ç”¨æˆ·æ•°æ®
â”‚   â””â”€â”€ conversations/      # å¯¹è¯å†å²
â”œâ”€â”€ start_backend.py        # åç«¯å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start_frontend.sh       # å‰ç«¯å¯åŠ¨è„šæœ¬
â”œâ”€â”€ äº§å“è§„åˆ’æ–‡æ¡£.md          # è¯¦ç»†äº§å“è§„åˆ’
â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜
```

## ğŸ”§ å¼€å‘è¯´æ˜

### APIç«¯ç‚¹
- `POST /register`: ç”¨æˆ·æ³¨å†Œ
- `POST /login`: ç”¨æˆ·ç™»å½•
- `GET /characters`: è·å–AIè§’è‰²åˆ—è¡¨
- `POST /chat`: å‘é€æ¶ˆæ¯ç»™AIè§’è‰²
- `GET /conversations`: è·å–ç”¨æˆ·å¯¹è¯å†å²

### æ•°æ®å­˜å‚¨
- ç”¨æˆ·æ•°æ®å­˜å‚¨åœ¨ `data/users.json`
- å¯¹è¯å†å²å­˜å‚¨åœ¨ `data/conversations/` ç›®å½•ä¸‹
- æ¯ä¸ªå¯¹è¯ä¼šè¯å¯¹åº”ä¸€ä¸ªJSONæ–‡ä»¶

### ç¯å¢ƒå˜é‡é…ç½®
```
OPENAI_API_KEY=your_openai_api_key_here
SECRET_KEY=your_secret_key_for_jwt
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
```

## ğŸ› è°ƒè¯•æŒ‡å—

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. åç«¯å¯åŠ¨é—®é¢˜

**é—®é¢˜**: `ModuleNotFoundError: No module named 'xxx'`
```bash
# è§£å†³æ–¹æ¡ˆï¼šå®‰è£…ç¼ºå¤±çš„ä¾èµ–
cd backend

# æ–¹æ¡ˆ1: ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ (æ¨è)
python3 -m venv venv
source venv/bin/activate  # macOS/Linux
# æˆ– venv\Scripts\activate  # Windows
pip install -r requirements.txt

# æ–¹æ¡ˆ2: ç”¨æˆ·ç›®å½•å®‰è£…
python3 -m pip install --user -r requirements.txt

# æ–¹æ¡ˆ3: ç³»ç»Ÿçº§å®‰è£… (ä¸æ¨èï¼Œå¯èƒ½ç ´åç³»ç»Ÿ)
python3 -m pip install --break-system-packages -r requirements.txt
```

**é—®é¢˜**: `externally-managed-environment` (macOSå¸¸è§)
```bash
# è¿™æ˜¯macOSä¿æŠ¤ç³»ç»ŸPythonçš„æœºåˆ¶
# è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ
cd backend
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# æˆ–è€…ä½¿ç”¨å¯åŠ¨è„šæœ¬è‡ªåŠ¨å¤„ç†
python3 ../start_backend.py
```

**é—®é¢˜**: `OpenAI API key not configured`
```bash
# è§£å†³æ–¹æ¡ˆï¼šæ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®
# 1. ç¡®ä¿ backend/.env æ–‡ä»¶å­˜åœ¨
# 2. æ£€æŸ¥ OPENAI_API_KEY æ˜¯å¦æ­£ç¡®è®¾ç½®
cat backend/.env
```

**é—®é¢˜**: ç«¯å£8000è¢«å ç”¨
```bash
# æŸ¥çœ‹å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :8000

# æ€æ­»å ç”¨è¿›ç¨‹
kill -9 <PID>

# æˆ–è€…ä½¿ç”¨ä¸åŒç«¯å£å¯åŠ¨
uvicorn main:app --port 8001
```

#### 2. å‰ç«¯å¯åŠ¨é—®é¢˜

**é—®é¢˜**: `npm: command not found`
```bash
# è§£å†³æ–¹æ¡ˆï¼šå®‰è£…Node.js
# macOS
brew install node

# Ubuntu
sudo apt install nodejs npm

# Windows
# ä» https://nodejs.org ä¸‹è½½å®‰è£…
```

**é—®é¢˜**: ä¾èµ–å®‰è£…å¤±è´¥
```bash
# æ¸…ç†npmç¼“å­˜
npm cache clean --force

# åˆ é™¤node_modulesé‡æ–°å®‰è£…
rm -rf node_modules package-lock.json
npm install
```

**é—®é¢˜**: å‰ç«¯æ— æ³•è¿æ¥åç«¯
- æ£€æŸ¥åç«¯æ˜¯å¦åœ¨8000ç«¯å£è¿è¡Œ
- ç¡®è®¤CORSé…ç½®æ­£ç¡®
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

#### 3. APIè°ƒç”¨é—®é¢˜

**é—®é¢˜**: 401 Unauthorized
```bash
# æ£€æŸ¥JWT tokenæ˜¯å¦æœ‰æ•ˆ
# åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­æŸ¥çœ‹localStorage
localStorage.getItem('token')

# é‡æ–°ç™»å½•è·å–æ–°token
```

**é—®é¢˜**: OpenAI APIè°ƒç”¨å¤±è´¥
```bash
# æ£€æŸ¥APIå¯†é’¥ä½™é¢
# è®¿é—® https://platform.openai.com/usage

# æµ‹è¯•APIè¿æ¥
curl -H "Authorization: Bearer YOUR_API_KEY" \
  https://api.openai.com/v1/models
```

#### 4. è¯­éŸ³åŠŸèƒ½é—®é¢˜

**é—®é¢˜**: è¯­éŸ³è¯†åˆ«ä¸å·¥ä½œ
- æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒWeb Speech API
- ç¡®è®¤éº¦å…‹é£æƒé™å·²æˆäºˆ
- ä½¿ç”¨HTTPSæˆ–localhostï¼ˆHTTPä¸æ”¯æŒè¯­éŸ³APIï¼‰

**é—®é¢˜**: è¯­éŸ³åˆæˆæ— å£°éŸ³
- æ£€æŸ¥æµè§ˆå™¨éŸ³é‡è®¾ç½®
- ç¡®è®¤è¯­éŸ³åˆæˆAPIå¯ç”¨æ€§
- å°è¯•ä¸åŒçš„è¯­éŸ³å¼•æ“

### è°ƒè¯•å·¥å…·å’ŒæŠ€å·§

#### 1. åç«¯è°ƒè¯•

**å¯ç”¨è¯¦ç»†æ—¥å¿—**:
```python
# åœ¨ backend/main.py ä¸­æ·»åŠ 
import logging
logging.basicConfig(level=logging.DEBUG)
```

**APIæµ‹è¯•å·¥å…·**:
```bash
# ä½¿ç”¨curlæµ‹è¯•API
curl -X POST http://localhost:8000/register \
  -H "Content-Type: application/json" \
  -d '{"username":"test","email":"test@test.com","password":"123456"}'

# ä½¿ç”¨httpie (æ›´å‹å¥½çš„APIæµ‹è¯•å·¥å…·)
pip install httpie
http POST localhost:8000/register username=test email=test@test.com password=123456
```

**æ•°æ®åº“è°ƒè¯•**:
```bash
# æŸ¥çœ‹ç”¨æˆ·æ•°æ®
cat data/users.json | python3 -m json.tool

# æŸ¥çœ‹å¯¹è¯è®°å½•
ls data/conversations/
cat data/conversations/[conversation_id].json | python3 -m json.tool
```

#### 2. å‰ç«¯è°ƒè¯•

**æµè§ˆå™¨å¼€å‘è€…å·¥å…·**:
- æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·
- Consoleæ ‡ç­¾é¡µæŸ¥çœ‹é”™è¯¯ä¿¡æ¯
- Networkæ ‡ç­¾é¡µç›‘æ§APIè¯·æ±‚
- Applicationæ ‡ç­¾é¡µæŸ¥çœ‹localStorage

**Reactå¼€å‘å·¥å…·**:
```bash
# å®‰è£…React Developer Toolsæµè§ˆå™¨æ‰©å±•
# Chrome: https://chrome.google.com/webstore/detail/react-developer-tools/
# Firefox: https://addons.mozilla.org/en-US/firefox/addon/react-devtools/
```

**æ·»åŠ è°ƒè¯•æ—¥å¿—**:
```javascript
// åœ¨ç»„ä»¶ä¸­æ·»åŠ console.log
console.log('ç”¨æˆ·æ•°æ®:', user);
console.log('APIå“åº”:', response.data);
```

#### 3. ç½‘ç»œè°ƒè¯•

**æ£€æŸ¥APIè¿æ¥**:
```bash
# æµ‹è¯•åç«¯å¥åº·çŠ¶æ€
curl http://localhost:8000/

# æµ‹è¯•è·¨åŸŸè¯·æ±‚
curl -H "Origin: http://localhost:3000" \
  -H "Access-Control-Request-Method: POST" \
  -H "Access-Control-Request-Headers: X-Requested-With" \
  -X OPTIONS http://localhost:8000/login
```

**ä»£ç†é…ç½®** (å¦‚æœéœ€è¦):
```json
// åœ¨ frontend/package.json ä¸­æ·»åŠ 
{
  "proxy": "http://localhost:8000"
}
```

### æ€§èƒ½è°ƒè¯•

#### 1. åç«¯æ€§èƒ½

**ç›‘æ§APIå“åº”æ—¶é—´**:
```python
# æ·»åŠ ä¸­é—´ä»¶è®°å½•è¯·æ±‚æ—¶é—´
import time
from fastapi import Request

@app.middleware("http")
async def add_process_time_header(request: Request, call_next):
    start_time = time.time()
    response = await call_next(request)
    process_time = time.time() - start_time
    response.headers["X-Process-Time"] = str(process_time)
    return response
```

#### 2. å‰ç«¯æ€§èƒ½

**Reactæ€§èƒ½åˆ†æ**:
```bash
# å¯ç”¨æ€§èƒ½åˆ†æ
npm start -- --profile

# æ„å»ºåˆ†æåŒ…å¤§å°
npm run build
npx webpack-bundle-analyzer build/static/js/*.js
```

### æ—¥å¿—æ–‡ä»¶ä½ç½®

```bash
# åç«¯æ—¥å¿— (å¦‚æœé…ç½®)
tail -f backend/app.log

# ç³»ç»Ÿæ—¥å¿—
# macOS
tail -f /var/log/system.log

# Linux
tail -f /var/log/syslog
```

### å¼€å‘ç¯å¢ƒé‡ç½®

**å®Œå…¨é‡ç½®é¡¹ç›®**:
```bash
# åœæ­¢æ‰€æœ‰æœåŠ¡
pkill -f "uvicorn\|npm"

# æ¸…ç†åç«¯
cd backend
rm -rf __pycache__ .env
cd ..

# æ¸…ç†å‰ç«¯
cd frontend
rm -rf node_modules package-lock.json build
cd ..

# æ¸…ç†æ•°æ®
rm -rf data/users.json data/conversations/*

# é‡æ–°å¼€å§‹
python3 start_backend.py  # ç»ˆç«¯1
./start_frontend.sh      # ç»ˆç«¯2
```

## ğŸ¯ ç”¨æˆ·æ•…äº‹

1. **æ•™è‚²å­¦ä¹ è€…**: "ä½œä¸ºå†å²ä¸“ä¸šå­¦ç”Ÿï¼Œæˆ‘å¯ä»¥ä¸è‹æ ¼æ‹‰åº•å¯¹è¯ï¼Œæ·±å…¥ç†è§£å¤å¸Œè…Šå“²å­¦æ€æƒ³"
2. **å¨±ä¹çˆ±å¥½è€…**: "ä½œä¸ºå“ˆåˆ©æ³¢ç‰¹ç²‰ä¸ï¼Œæˆ‘å¯ä»¥ä¸å“ˆåˆ©èŠå¤©ï¼Œä½“éªŒé­”æ³•ä¸–ç•Œçš„ä¹è¶£"
3. **è¯­è¨€å­¦ä¹ è€…**: "ä½œä¸ºè‹±è¯­å­¦ä¹ è€…ï¼Œæˆ‘å¯ä»¥ä¸èå£«æ¯”äºšå¯¹è¯ï¼Œæå‡è‹±è¯­æ°´å¹³å’Œæ–‡å­¦ç´ å…»"

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- JWTèº«ä»½è®¤è¯
- å¯†ç å“ˆå¸Œå­˜å‚¨
- APIè®¿é—®æ§åˆ¶
- CORSå®‰å…¨é…ç½®

## ğŸ“ˆ æœªæ¥è§„åˆ’

- [ ] æ”¯æŒæ›´å¤šAIè§’è‰²
- [ ] å¤šè¯­è¨€ç•Œé¢
- [ ] è§’è‰²è‡ªå®šä¹‰åŠŸèƒ½
- [ ] ç¤¾äº¤åˆ†äº«åŠŸèƒ½
- [ ] ç§»åŠ¨ç«¯é€‚é…
- [ ] äº‘ç«¯æ•°æ®åŒæ­¥

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼

## ğŸ“„ è®¸å¯è¯

MIT License
